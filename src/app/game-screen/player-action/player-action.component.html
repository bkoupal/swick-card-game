<div class="flex flex-col-reverse sm:flex-col gap-4 m-4">
  <div class="pill-menu" [attr.disabled]="betMenuDisabled ? true : null">
    <span class="whitespace-normal">
      Current Bet:
      <span
        class="inline-block text-center"
        style="width: 4ch"
        data-cy="bet-value"
        >{{ currentBet }}</span
      >
    </span>

    <span class="whitespace-normal"> Change Bet: </span>
    <button (click)="changeBet.emit(-50)">- 50</button>
    <button (click)="changeBet.emit(-10)">- 10</button>
    <button (click)="changeBet.emit(10)">+ 10</button>
    <button (click)="changeBet.emit(50)">+ 50</button>

    <button (click)="setBet.emit(+betInput.value)" data-cy="setBet-btn">
      Set Bet:
    </button>
    <input
      class="w-24"
      #betInput
      type="number"
      [min]="gameConfig.minBet"
      [max]="gameConfig.maxBet"
      value="100"
      appInputConstrain
      data-cy="bet-input"
    />
  </div>

  <!-- Trump Selection Menu (only for dealer) -->
  <div class="pill-menu" *ngIf="trumpSelectionMenuVisible">
    <span class="whitespace-normal">Trump Card: {{ trumpCardDisplay }}</span>
    <button (click)="keepTrump.emit(true)" data-cy="keep-trump">
      Keep Trump
    </button>
    <button (click)="keepTrump.emit(false)" data-cy="discard-trump">
      Discard Trump
    </button>
  </div>

  <!-- Knock In Menu -->
  <div class="pill-menu" *ngIf="knockInMenuVisible">
    <span class="whitespace-normal">Trump Suit: {{ trumpSuit }}</span>
    <button (click)="knockIn.emit(true)" data-cy="knock-in">Knock In</button>
    <button (click)="knockIn.emit(false)" data-cy="pass">Pass</button>
  </div>

  <!-- Discard/Draw Menu -->
  <div class="pill-menu" *ngIf="discardDrawMenuVisible">
    <span class="whitespace-normal">
      Select cards from your hand, then choose:
    </span>
    <button
      (click)="playCards.emit()"
      data-cy="play-cards"
      class="bg-green-600 hover:bg-green-700"
    >
      Play These Cards
    </button>
    <button
      (click)="discardDraw.emit()"
      data-cy="discard-draw"
      [disabled]="selectedCardCount === 0"
      [class.opacity-50]="selectedCardCount === 0"
      [class.cursor-not-allowed]="selectedCardCount === 0"
    >
      Discard & Draw ({{ selectedCardCount }} cards)
    </button>
  </div>

  <div
    class="pill-menu"
    *ngIf="
      !readyMenuHidden && !trumpSelectionMenuVisible && !knockInMenuVisible
    "
  >
    <button style="flex-grow: 100" (click)="readyChange.emit(!ready)">
      {{ ready ? "Not ready" : "Ready" }}
    </button>
    <div class="h-9">
      <mat-checkbox
        class="-mt-2.5 mr-4"
        [checked]="autoReady"
        (change)="autoReadyChange.emit($event.checked)"
        matTooltip="Automatically sets player as ready after every round"
        >Auto Ready</mat-checkbox
      >
    </div>
  </div>

  <div
    class="pill-menu"
    *ngIf="
      readyMenuHidden &&
      !trumpSelectionMenuVisible &&
      !knockInMenuVisible &&
      cardPlayPhase
    "
  >
    <span class="whitespace-normal text-center">
      Click a card from your hand to play it
    </span>
  </div>
</div>
